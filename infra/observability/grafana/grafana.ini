; Purpose: Grafana server configuration for subpath deployment behind ALB
; Scope: Server settings, authentication, security, and subpath routing for the observability Grafana instance
; Overview: Configures Grafana to run on port 3001 and serve from the /grafana/ subpath, enabling
;     ALB path-based routing. Anonymous access is enabled with Viewer role for read-only dashboard
;     access without authentication. The admin password is sourced from the GF_SECURITY_ADMIN_PASSWORD
;     environment variable set in docker-compose.yml. Logging is configured for console output
;     compatible with Docker log collection.
; Dependencies: Docker Compose environment variables, ALB path routing (/grafana/*)
; Exports: Grafana UI accessible at <ALB>/grafana/
; Environment: Identical across dev/staging/prod
; Related: docker-compose.yml for container settings, datasources.yml for data source provisioning
; Implementation: Subpath serving with anonymous viewer access for dashboard consumption

[server]
http_port = 3001
root_url = %(protocol)s://%(domain)s/grafana/
serve_from_sub_path = true

[auth.anonymous]
enabled = true
org_role = Viewer

[security]
admin_user = admin
; admin_password set via GF_SECURITY_ADMIN_PASSWORD environment variable

[log]
mode = console
level = info

[log.console]
format = json

[dashboards]
default_home_dashboard_path = /var/lib/grafana/dashboards/home.json
